# Task 0201: 实现ECDH密钥交换

## 任务描述

实现基于ECDH的密钥交换功能，为设备配对提供安全的密钥协商。

## 正交性分析

- **密码学**: 专注于ECDH算法实现
- **密钥管理**: 密钥生成和存储
- **协议实现**: 密钥交换协议逻辑
- **安全**: 零知识证明和验证

## 技术实现

### 核心组件
```rust
// rust-core/crypto/ecdh.rs
pub struct EcdhKeyExchange {
    private_key: StaticSecret,
    public_key: PublicKey,
    shared_secret: Option<SharedSecret>,
}

pub struct KeyExchangeProtocol {
    local_keys: EcdhKeyExchange,
    remote_public_key: Option<PublicKey>,
    exchange_state: ExchangeState,
}

pub enum ExchangeState {
    NotStarted,
    PublicKeySent,
    PublicKeyReceived,
    SharedSecretGenerated,
    Verified,
    Failed,
}
```

### 接口设计
```rust
impl EcdhKeyExchange {
    pub fn generate_key_pair() -> Self;
    pub fn get_public_key_bytes(&self) -> [u8; 32];
    pub fn compute_shared_secret(&mut self, remote_public_bytes: &[u8; 32]) -> Result<(), CryptoError>;
    pub fn get_shared_secret(&self) -> Option<&SharedSecret>;
    pub fn verify_remote_public(&self, remote_public_bytes: &[u8; 32]) -> bool;
}
```

## 验收标准

- [ ] 安全的密钥对生成
- [ ] 正确的共享密钥计算
- [ ] 公钥验证机制
- [ ] 防止中间人攻击
- [ ] 密钥安全存储
- [ ] 符合X25519标准