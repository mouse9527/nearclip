# Task 0203: 实现二维码配对

## 任务描述

实现基于二维码的设备配对功能，提供便捷的配对体验。

## 正交性分析

- **二维码生成**: 专注于二维码创建
- **配对协议**: 二维码配对流程
- **UI集成**: 与用户界面交互
- **安全**: 配对信息的安全传输

## 技术实现

### 核心组件
```rust
// rust-core/pairing/qr_pairing.rs
pub struct QrPairingManager {
    key_exchange: EcdhKeyExchange,
    pairing_state: PairingState,
    config: QrPairingConfig,
}

pub struct QrCodeData {
    pub device_id: String,
    pub public_key: String,
    pub pairing_token: String,
    pub timestamp: u64,
    pub version: String,
}

pub enum PairingState {
    Idle,
    GeneratingQr,
    QrGenerated(String),
    WaitingForScan,
    PairingComplete,
    PairingFailed(String),
}
```

### 接口设计
```rust
impl QrPairingManager {
    pub fn new() -> Self;
    pub fn start_pairing(&mut self) -> Result<QrCodeData, PairingError>;
    pub fn generate_qr_code(&self, data: &QrCodeData) -> Result<Vec<u8>, PairingError>;
    pub fn confirm_pairing(&mut self, scanned_data: &QrCodeData) -> Result<bool, PairingError>;
    pub fn get_pairing_state(&self) -> &PairingState;
    pub fn cancel_pairing(&mut self);
}
```

## 验收标准

- [ ] 安全的二维码生成
- [ ] 配对流程完整
- [ ] 用户界面友好
- [ ] 错误处理完善
- [ ] 配对超时处理
- [ ] 防重放攻击