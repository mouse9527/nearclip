# Story 3: 手动文本传输

## INVEST 分析

- **Independent**: 在配对基础上独立实现
- **Negotiable**: 传输方式和UI可调整
- **Valuable**: 用户可以主动发送文本
- **Estimable**: 传输逻辑简单，工作量可估算
- **Small**: 功能明确，适合快速实现
- **Testable**: 可通过实际传输测试验证

## 用户场景

作为用户，我希望能够手动选择文本并发送到指定的配对设备，这样我就可以在需要时共享特定内容。

## 验收标准

- [ ] 提供文本输入界面
- [ ] 显示可发送的设备列表
- [ ] 支持选择单个或多个目标设备
- [ ] 发送进度实时显示
- [ ] 传输失败时重试机制
- [ ] 传输历史记录查看
- [ ] 支持大文本分段传输

## 技术实现

### 核心组件
- **文本输入管理**: 文本内容处理
- **设备选择器**: 多设备选择界面
- **传输队列**: 管理并发传输任务
- **进度追踪**: 传输状态和进度
- **历史记录**: 传输历史存储

### 传输流程
1. 用户输入文本内容
2. 选择目标设备
3. 文本分段处理（大文本）
4. 加密每个数据包
5. 通过TCP发送到目标设备
6. 等待确认并更新状态
7. 记录传输历史

### 数据结构
```rust
struct TextTransfer {
    id: String,
    content: String,
    target_devices: Vec<String>,
    status: TransferStatus,
    progress: f32,
    created_at: SystemTime,
}
```

## 相关任务

- [task-0301.md](./task-0301.md) - 实现文本输入界面
- [task-0302.md](./task-0302.md) - 实现设备选择器
- [task-0303.md](./task-0303.md) - 实现文本传输队列
- [task-0304.md](./task-0304.md) - 实现传输进度追踪
- [task-0305.md](./task-0305.md) - 实现传输历史记录