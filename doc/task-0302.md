# Task 0302: 实现设备选择器

## 任务描述

实现设备选择器组件，让用户可以选择要发送文本的目标设备。

## 正交性分析

- **设备展示**: 显示可用设备列表
- **选择逻辑**: 多选和单选支持
- **状态管理**: 设备状态实时更新
- **交互设计**: 用户友好的选择体验

## 技术实现

### 核心组件
```kotlin
// android/app/src/main/java/com/nearclip/ui/DeviceSelector.kt
@Composable
fun DeviceSelector(
    selectedDevices: List<String>,
    onDevicesSelected: (List<String>) -> Unit,
    modifier: Modifier = Modifier
) {
    val devices by remember { mutableStateOf<List<DeviceInfo>>(emptyList()) }
    val viewModel: DeviceViewModel = viewModel()
    
    LaunchedEffect(Unit) {
        viewModel.devices.collect { deviceList ->
            devices = deviceList.filter { it.isConnected }
        }
    }
    
    Column(
        modifier = modifier.fillMaxWidth()
    ) {
        Text(
            text = "选择目标设备",
            style = MaterialTheme.typography.titleMedium,
            modifier = Modifier.padding(bottom = 8.dp)
        )
        
        LazyColumn(
            modifier = Modifier
                .fillMaxWidth()
                .heightIn(max = 200.dp)
        ) {
            items(devices) { device ->
                DeviceCheckbox(
                    device = device,
                    isSelected = selectedDevices.contains(device.id),
                    onSelectionChanged = { isSelected ->
                        val newSelection = if (isSelected) {
                            selectedDevices + device.id
                        } else {
                            selectedDevices - device.id
                        }
                        onDevicesSelected(newSelection)
                    }
                )
            }
        }
    }
}

@Composable
fun DeviceCheckbox(
    device: DeviceInfo,
    isSelected: Boolean,
    onSelectionChanged: (Boolean) -> Unit
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .padding(vertical = 4.dp),
        verticalAlignment = Alignment.CenterVertically
    ) {
        Checkbox(
            checked = isSelected,
            onCheckedChange = onSelectionChanged
        )
        
        Column(
            modifier = Modifier
                .weight(1f)
                .padding(start = 8.dp)
        ) {
            Text(
                text = device.name,
                style = MaterialTheme.typography.bodyMedium
            )
            Text(
                text = device.ipAddress,
                style = MaterialTheme.typography.bodySmall,
                color = MaterialTheme.colorScheme.onSurfaceVariant
            )
        }
        
        DeviceStatusIndicator(status = device.status)
    }
}
```

## 验收标准

- [ ] 设备列表实时更新
- [ ] 多选/单选支持
- [ ] 设备状态显示
- [ ] 交互响应灵敏
- [ ] 界面布局合理
- [ ] 无障碍支持