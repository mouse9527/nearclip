syntax = "proto3";

package nearclip.error;

// Error codes enumeration
enum ErrorCode {
  ERROR_CODE_UNSPECIFIED = 0;

  // Device discovery errors
  ERROR_CODE_DISCOVERY_FAILED = 1000;
  ERROR_CODE_BLUETOOTH_UNAVAILABLE = 1001;
  ERROR_CODE_PERMISSION_DENIED = 1002;
  ERROR_CODE_DEVICE_NOT_FOUND = 1003;

  // Connection errors
  ERROR_CODE_CONNECTION_FAILED = 2000;
  ERROR_CODE_CONNECTION_TIMEOUT = 2001;
  ERROR_CODE_CONNECTION_LOST = 2002;
  ERROR_CODE_AUTHENTICATION_FAILED = 2003;

  // Sync errors
  ERROR_CODE_SYNC_FAILED = 3000;
  ERROR_CODE_DATA_CORRUPTION = 3001;
  ERROR_CODE_ENCRYPTION_FAILED = 3002;
  ERROR_CODE_VALIDATION_FAILED = 3003;

  // System errors
  ERROR_CODE_INTERNAL_ERROR = 4000;
  ERROR_CODE_MEMORY_ERROR = 4001;
  ERROR_CODE_NETWORK_ERROR = 4002;
  ERROR_CODE_PROTOCOL_ERROR = 4003;
}

// Error severity levels
enum ErrorSeverity {
  ERROR_SEVERITY_UNSPECIFIED = 0;
  ERROR_SEVERITY_DEBUG = 1;
  ERROR_SEVERITY_INFO = 2;
  ERROR_SEVERITY_WARNING = 3;
  ERROR_SEVERITY_ERROR = 4;
  ERROR_SEVERITY_CRITICAL = 5;
}

// Error message structure
message ErrorInfo {
  ErrorCode error_code = 1;
  string error_message = 2;
  ErrorSeverity severity = 3;
  string component = 4;
  int64 timestamp = 5;
  map<string, string> context = 6;
  string stack_trace = 7;
}

// Error report
message ErrorReport {
  repeated ErrorInfo errors = 1;
  string device_id = 2;
  string app_version = 3;
  string os_version = 4;
  int64 report_timestamp = 5;
  map<string, string> system_info = 6;
}

// Error acknowledgment
message ErrorAcknowledgment {
  bool received = 1;
  int64 report_id = 2;
  string feedback = 3;
}